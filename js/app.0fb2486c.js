(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/tp3_appweb/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0127":function(e,t,r){},"034f":function(e,t,r){"use strict";r("0127")},1883:function(e,t,r){},"45c6":function(e,t,r){"use strict";(function(e){r("063a"),r("e2c0"),r("bcee"),r("e4bd"),r("b900");function n(t){var r=t.split(".")[1],n=e.from(r,"base64");return JSON.parse(n.toString())}function a(e){return n(e).exp}function i(e){return n(e).sub}function s(e){var t=n(e).exp;return!(Date.now()>=1e3*t)}t["a"]={decrypt:n,isAlive:s,getUserId:i,getExpiration:a}}).call(this,r("257d").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("5675"),r("58c3"),r("59f3"),r("3e3e");var n=r("d04a"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("NavbarComponent")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav",{staticClass:"navbar navbar-expand-sm",staticStyle:{"background-color":"#202325"},attrs:{id:"nav"}},[r("div",{staticClass:"navbar-nav mr-auto"},[r("router-link",{staticClass:"nav-link",class:{active:"Home"==e.$route.name},attrs:{to:{name:"Home"}}},[e._v("Accueil")]),e.isLoggedIn?e._e():r("router-link",{staticClass:"nav-link",class:{active:"Register"==e.$route.name},attrs:{to:{name:"Register"}}},[e._v("S'inscrire")])],1),r("div",{staticClass:"navbar-nav ml-auto"},[e.isLoggedIn?r("b-link",{staticClass:"nav-link",attrs:{id:"disconnect"},on:{click:e.logout}},[e._v(" Se déconnecter ")]):r("router-link",{staticClass:"nav-link",class:{active:"Login"==e.$route.name},attrs:{to:{name:"Login"}}},[e._v(" Connexion ")])],1)]),r("router-view")],1)},o=[],c={name:"Navbar",computed:{isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]}},methods:{logout:function(){this.$store.dispatch("authentication/logout"),this.$router.push({name:"Login"})}}},u=c,l=(r("e5a2"),r("bdd7")),p=Object(l["a"])(u,s,o,!1,null,"27f432d7",null),d=p.exports,m={name:"App",components:{NavbarComponent:d}},f=m,h=(r("034f"),Object(l["a"])(f,a,i,!1,null,null,null)),v=h.exports,g=r("dc3b"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("div",{staticClass:"row"},[r("div",{staticClass:"container col-4 mr-auto"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mt-5"},[r("ParkListComponent")],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mt-5"},[r("TrailListComponent")],1)])]),r("div",{staticClass:"container col-4 mr-auto"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mt-5"},[r("MapComponent")],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 mt-5"},[r("LikesComponent")],1)])])])])},b=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("l-map",{staticStyle:{height:"500px",width:"auto"},attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.segments,(function(t){return r("l-polyline",{key:t.id,staticClass:"segments",attrs:{"lat-lngs":t.coordinates,color:e.changeDifficulty(t.level)}})}))],2)],1)},x=[],y=r("608b"),L=r("e0fd"),_=r("5976"),O={name:"Map",components:{LMap:y["a"],LTileLayer:L["a"],LPolyline:_["a"]},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[46.78601339822761,-71.28621784239412]}},computed:{segments:function(){return this.$store.state.trail.trailSegments}},methods:{changeDifficulty:function(e){switch(this.changeCenter(),e){case"Très Difficile":return"red";case"Difficile":return"orange";case"Intermédiaire":return"blue";case"Facile":return"green";case"Inconnue":return"black"}},changeCenter:function(){this.center=this.$store.state.trail.trailSegments[0].coordinates[0]}}},R=O,E=Object(l["a"])(R,w,x,!1,null,"33533234",null),I=E.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.clickedPark,expression:"clickedPark"}],staticClass:"form-control",attrs:{id:"parkSelector"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.clickedPark=t.target.multiple?r:r[0]},function(t){return e.changeSelectedPark(e.clickedPark)}]}},e._l(e.parks,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),0)])},T=[],j=r("c452"),S=(r("833b"),r("cde7"),r("e687"),"https://production.com/api"),$=r("8aad"),P=r.n($),z=r("6c71"),B=r("5a19"),N=r("5d80"),A=r("7946"),M=r("a927"),U=r("e0e0"),V=(r("bfa3"),function(e){Object(A["a"])(r,e);var t=Object(M["a"])(r);function r(e,n,a){var i;return Object(N["a"])(this,r),i=t.call(this,e),i.codeText=n,i.code=a,i}return Object(B["a"])(r)}(Object(U["a"])(Error)));function D(e){if(q(e)){var t=new V("Erreur avec le réseau. Impossible de communiquer avec le serveur.");return t}var r=new V(e.response.data,e.response.statusText,e.response.status);return r}function q(e){return!!e.isAxiosError&&!e.response}function H(e){return J.apply(this,arguments)}function J(){return J=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post("".concat(S,"/login"),{email:t.email,password:t.password});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),J.apply(this,arguments)}function F(e){return G.apply(this,arguments)}function G(){return G=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post("".concat(S,"/register"),{email:t.email,password:t.password,name:t.name});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),G.apply(this,arguments)}var W={getToken:H,registerToken:F},K=r("45c6"),Q={token:"",authServiceError:""},X={isLoggedIn:function(e){return!!e.token},getTokenUserId:function(e){var t=K["a"].getUserId(e.token);return t}},Y={clearError:function(e){e.authServiceError=""},initializeAuthentication:function(e,t){e.token=t,e.authServiceError=""},logout:function(e){e.token=""},setAuthServiceError:function(e,t){e.authServiceError=t}},Z={login:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,W.getToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},register:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,W.registerToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},logout:function(e){var t=e.commit;t("logout")}},ee={namespaced:!0,state:Q,actions:Z,mutations:Y,getters:X};r("351c");function te(e){return re.apply(this,arguments)}function re(){return re=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/users/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),D(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),re.apply(this,arguments)}var ne={getUserById:te},ae={email:"",name:"",onError:!1},ie={},se={initializeProfile:function(e,t){e.email=t.email,e.name=t.name,e.onError=!1},setOnError:function(e){e.onError=!0}},oe={getProfile:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,t.prev=1,a=n["authentication/getTokenUserId"],t.next=5,ne.getUserById(a);case 5:i=t.sent,r("initializeProfile",i),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r("setOnError");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},ce={namespaced:!0,state:ae,actions:oe,mutations:se,getters:ie};r("bcee"),r("a8a2"),r("f86c"),r("e128");function ue(e){return le.apply(this,arguments)}function le(){return le=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/trails/").concat(t));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),le.apply(this,arguments)}function pe(e){return de.apply(this,arguments)}function de(){return de=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/parks/").concat(t,"/trails"));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),de.apply(this,arguments)}function me(e){return fe.apply(this,arguments)}function fe(){return fe=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,Promise.all(t.map(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,he(t);case 2:n=e.sent,r.push(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function he(e){return ve.apply(this,arguments)}function ve(){return ve=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/segments/").concat(t));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),ve.apply(this,arguments)}var ge={getTrailsByParkId:pe,getTrailById:ue,getAllSegments:me,getSegmentById:he},ke={id:"",name:"",listTrails:[],onError:!1},be={},we={initializePark:function(e,t){e.id=t.id,e.name=t.name,e.onError=!1},setOnError:function(e){e.onError=!0},changeTrails:function(e,t){e.listTrails=t}},xe={setPark:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.state,r.prev=1,r.next=4,Ke.getParkById(t);case 4:return a=r.sent,r.next=7,ge.getTrailsByParkId(t);case 7:i=r.sent,n("initializePark",a),n("changeTrails",i),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),n("setOnError");case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()}},ye={namespaced:!0,state:ke,actions:xe,mutations:we,getters:be},Le={trailId:0,trailName:"",trailSegments:[],onError:!1},_e={},Oe={initializeTrail:function(e,t){e.trailId=t.id,e.trailName=t.name,e.onError=!1},setOnError:function(e){e.onError=!0},initializeSegments:function(e,t){e.trailSegments=t}},Re={setTrail:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,ge.getTrailById(t);case 4:return a=r.sent,r.next=7,ge.getAllSegments(a.segments);case 7:i=r.sent,n("initializeTrail",a),n("initializeSegments",i),r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),n("setOnError");case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()}},Ee={namespaced:!0,state:Le,actions:Re,mutations:Oe,getters:_e};r("adc5");function Ie(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/trails/").concat(t,"/likes"));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Ce.apply(this,arguments)}function Te(e){return je.apply(this,arguments)}function je(){return je=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.post("".concat(S,"/likes"),{userId:t.userId,trailId:t.trailId});case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),D(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),je.apply(this,arguments)}function Se(e){return $e.apply(this,arguments)}function $e(){return $e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.delete("".concat(S,"/likes/").concat(t));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e["catch"](0),D(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),$e.apply(this,arguments)}var Pe={getTrailLikes:Ie,postLike:Te,deleteLike:Se},ze={likesList:[],isLiked:!1,likes:0},Be={nbLikes:function(e){return e.likes},likesList:function(e){return e.likesList},isLiked:function(e){return e.isLiked}},Ne={initializeLikes:function(e,t){e.likes=t.length,e.likesList=t},setOnError:function(e){e.onError=!0},userLikeStatus:function(e,t){e.isLiked=t}},Ae={updateLikes:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,Pe.getTrailLikes(t);case 4:a=r.sent,n("initializeLikes",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setOnError");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},updateIsLiked:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a=e.state;try{i=!1,a.likesList.forEach((function(e){e.userId===t&&(i=!0)})),n("userLikeStatus",!!i)}catch(s){n("setOnError")}case 2:case"end":return r.stop()}}),r)})))()},deleteLike:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.prev=1,i=-10,a.likesList.forEach((function(e){e.userId===t&&(i=e.id)})),r.next=6,Pe.deleteLike(i);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setOnError");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},Me={namespaced:!0,state:ze,actions:Ae,mutations:Ne,getters:Be},Ue=r("f8c1"),Ve=new Ue["a"]({storage:window.sessionStorage,reducer:function(e){return{authentication:{token:e.authentication.token}}}});n["default"].use(z["a"]);var De=new z["a"].Store({state:{},mutations:{},actions:{},modules:{authentication:ee,profile:ce,park:ye,trail:Ee,likes:Me},plugins:[Ve.plugin]}),qe=P.a.create({});qe.interceptors.request.use((function(e){return De.getters["authentication/isLoggedIn"]&&(e.headers.authorization="Bearer ".concat(De.state.authentication.token)),e}));var He=qe;function Je(){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/parks/"));case 3:return t=e.sent,r=t.data,e.abrupt("return",r.sort((function(e,t){return e.name.localeCompare(t.name)})));case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Fe.apply(this,arguments)}function Ge(e){return We.apply(this,arguments)}function We(){return We=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.get("".concat(S,"/parks/")+t);case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),D(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),We.apply(this,arguments)}var Ke={getAllParksOrderByName:Je,getParkById:Ge},Qe={data:function(){return{parks:[],clickedPark:" "}},created:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ke.getAllParksOrderByName();case 2:e.parks=t.sent,e.clickedPark=e.parks[0].id,e.changeSelectedPark(e.clickedPark);case 5:case"end":return t.stop()}}),t)})))()},methods:{changeSelectedPark:function(e){this.clickedPark=e,this.$store.dispatch("park/setPark",e)}}},Xe=Qe,Ye=(r("fac6"),Object(l["a"])(Xe,C,T,!1,null,"163f97b6",null)),Ze=Ye.exports,et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"form-group"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.clickedTrail,expression:"clickedTrail"}],staticClass:"form-control",attrs:{size:"6"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.clickedTrail=t.target.multiple?r:r[0]},function(t){return e.changeSelectedTrail(e.clickedTrail)}]}},e._l(e.trails,(function(t){return r("option",{key:t.name,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),0)])])},tt=[],rt={data:function(){return{clickedTrail:" "}},created:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.clickedTrail=42,e.changeSelectedTrail(e.clickedTrail);case 2:case"end":return t.stop()}}),t)})))()},methods:{changeSelectedTrail:function(e){this.clickedTrail=e,this.$store.dispatch("trail/setTrail",e),this.$store.dispatch("likes/updateLikes",this.clickedTrail)}},computed:{trails:function(){return this.$store.state.park.listTrails}}},nt=rt,at=Object(l["a"])(nt,et,tt,!1,null,"b0299920",null),it=at.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoading?n("img",{attrs:{src:r("dadb"),alt:"Chargement...",width:"20"}}):n("div",[e.isLiked?n("button",{staticClass:"btn",attrs:{id:"liked"},on:{click:function(t){return e.deleteLike()}}},[n("b-icon",{attrs:{icon:"heart-fill"}})],1):n("button",{staticClass:"btn",attrs:{id:"disliked"},on:{click:function(t){return e.saveLike()}}},[n("b-icon",{attrs:{icon:"heart"}})],1)]),n("p",{attrs:{id:"likes"}},[e._v(e._s(e.nbLikes))]),n("p",{attrs:{id:"park"}},[e._v(e._s(e.clickedPark))]),n("p",{attrs:{id:"trail"}},[e._v(e._s(e.trailName))])])},ot=[],ct=(r("8351"),{data:function(){return{isLoading:!1}},methods:{saveLike:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoggedIn){t.next=8;break}return e.isLoading=!0,t.next=4,Pe.postLike({userId:e.userId,trailId:e.trailId});case 4:e.$store.dispatch("likes/updateLikes",e.trailId),e.isLoading=!1,t.next=12;break;case 8:return t.next=10,e.$bvModal.msgBoxConfirm("Vous n'êtes pas authentifié, voulez vous vous créer un compte?",{cancelTitle:"Non",okTitle:"Oui",bodyBgVariant:"dark",bodyTextVariant:"success",footerBgVariant:"dark",okVariant:"success"});case 10:r=t.sent,!0===r&&e.$router.push({name:"Register"});case 12:case"end":return t.stop()}}),t)})))()},deleteLike:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLoggedIn){t.next=8;break}return e.isLoading=!0,t.next=4,e.$store.dispatch("likes/deleteLike",e.userId);case 4:e.$store.dispatch("likes/updateLikes",e.trailId),e.isLoading=!1,t.next=12;break;case 8:return t.next=10,e.$bvModal.msgBoxConfirm("Vous n'êtes pas authentifié, voulez vous vous créer un compte?",{cancelTitle:"Non",okTitle:"Oui",bodyBgVariant:"dark",bodyTextVariant:"success",footerBgVariant:"dark",okVariant:"success"});case 10:r=t.sent,!0===r&&e.$router.push({name:"Register"});case 12:case"end":return t.stop()}}),t)})))()}},computed:{nbLikes:function(){return this.$store.getters["likes/nbLikes"]},likesList:function(){return this.$store.getters["likes/likesList"]},userId:function(){return this.isLoggedIn?Number(this.$store.getters["authentication/getTokenUserId"]):null},trailId:function(){return this.$store.state.trail.trailId},isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]},isLiked:function(){return!!this.isLoggedIn&&(this.$store.dispatch("likes/updateIsLiked",this.userId),this.$store.getters["likes/isLiked"])},trailName:function(){return this.$store.state.trail.trailName},clickedPark:function(){return this.$store.state.park.name}}}),ut=ct,lt=(r("d34b"),Object(l["a"])(ut,st,ot,!1,null,"22b40689",null)),pt=lt.exports,dt={name:"Home",components:{MapComponent:I,ParkListComponent:Ze,TrailListComponent:it,LikesComponent:pt}},mt=dt,ft=Object(l["a"])(mt,k,b,!1,null,null,null),ht=ft.exports,vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h1",[e._v("Connexion")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{id:"email",required:"",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{id:"password",required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{variant:"success",type:"submit"}},[e._v("Se connecter")])],1),e.authServiceError?r("div",{attrs:{id:"authError"}},[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},gt=[],kt={name:"Login",created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/login",{email:e.email,password:e.password});case 2:e.authServiceError||e.$router.push({name:"Home"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},bt=kt,wt=Object(l["a"])(bt,vt,gt,!1,null,null,null),xt=wt.exports,yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[r("h1",[e._v("Créer un compte")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{id:"email",required:"",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Nom d'utilisateur")]),r("b-form-input",{attrs:{id:"name",required:"",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{id:"password",required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{type:"submit",variant:"success"}},[e._v("Créer le compte")])],1),e.authServiceError?r("div",[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},Lt=[],_t={name:"Register",created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",password:"",name:""}},methods:{register:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/register",{email:e.email,password:e.password,name:e.name});case 2:e.authServiceError||e.$router.push({name:"Home"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},Ot=_t,Rt=Object(l["a"])(Ot,yt,Lt,!1,null,"7ddcecca",null),Et=Rt.exports,It=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ct=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-container"},[r("span",{staticClass:"title"},[e._v("Cette page n'existe pas...")])])}],Tt={},jt=Object(l["a"])(Tt,It,Ct,!1,null,null,null),St=jt.exports;n["default"].use(g["a"]);var $t=[{path:"/",name:"Home",component:ht},{path:"/login",name:"Login",component:xt},{path:"/register",name:"Register",component:Et},{path:"*",name:"PageNotFound",component:St}],Pt=new g["a"]({mode:"history",base:"/tp3_appweb/",routes:$t}),zt=Pt,Bt=r("d422"),Nt=r("8472"),At=(r("5f3e"),r("41cf"),{welcomeMessage:"Allo tout le monde !",install:function(e){e.prototype.$getUiText=function(e){return At[e]}}}),Mt=At,Ut=(r("9a6e"),r("9b4d")),Vt=r.n(Ut);delete Vt.a.Icon.Default.prototype._getIconUrl,Vt.a.Icon.Default.mergeOptions({iconRetinaUrl:r("a741"),iconUrl:r("843f"),shadowUrl:r("9021")}),n["default"].use(Bt["a"]),n["default"].use(Nt["a"]),n["default"].use(Mt),n["default"].config.productionTip=!1,new n["default"]({router:zt,store:De,render:function(e){return e(v)}}).$mount("#app")},"993a":function(e,t,r){},"9deb":function(e,t,r){},d34b:function(e,t,r){"use strict";r("993a")},dadb:function(e,t,r){e.exports=r.p+"img/loadingWaiting.9da8a7ce.gif"},e5a2:function(e,t,r){"use strict";r("9deb")},fac6:function(e,t,r){"use strict";r("1883")}});
//# sourceMappingURL=app.0fb2486c.js.map